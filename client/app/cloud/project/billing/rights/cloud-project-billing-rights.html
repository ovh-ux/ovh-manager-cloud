<div class="cui-page__content">

    <!-- CONTACT FORMS -->
    <div class="well">
        <!--<p class="bold">{{ :: 'cpb_rights_expl' | translate }}</p>-->
        <!--<p class="text-warning">
            <i class="fa fa-warning text-warning"></i>
            {{:: 'cpb_rights_soon' | translate }}
        </p>-->

        <!-- OWNER CONTACT FORM -->
        <form id="ownerContactForm" class="form-horizontal ng-pristine ng-valid-maxlength">
            <div class="form-group" data-ng-class="{'has-error': ownerContactForm.ownerContactInput.$invalid}">
                <label class="col-sm-4 control-label ng-scope" for="ownerContactInput">
                    {{:: 'cpb_rights_owner' | translate }}
                </label>
                <div class="col-sm-4">
                    <div class="input-group" data-ng-if="BillingRightsCtrl.toggle.owner">
                        <input
                            id="ownerContactInput"
                            name="ownerContactInput"
                            type="text"
                            class="form-control ng-pristine ng-untouched ng-valid ng-valid-maxlength"
                            autofocus
                            autoselect
                            placeholder="{{BillingRightsCtrl.model.isUSorCA ? 'cpb_rights_table_email' : 'cpb_rights_table_nichandle' | translate}}"
                            data-ng-model="BillingRightsCtrl.contactFormData.owner"
                            data-ng-keyup="BillingRightsCtrl.watchOwnerInput($event)"
                            data-ng-maxlength="255">
                        </input>
                        <span
                            class="input-group-addon">
                        <button type="reset" class="no-style" data-ng-click="BillingRightsCtrl.toggleEditOwner()">
                            <i class="fa fa-times"></i>
                        </button>
                        <button type="submit" class="no-style" data-ng-click="BillingRightsCtrl.validateEditOwner()">
                            <i class="fa fa-check"></i>
                        </button>
                        </span>
                    </div>
                    <span class="ng-binding ng-scope" data-ng-if="!BillingRightsCtrl.toggle.owner" style="padding-top: 7px; display: inline-block">
                        {{ BillingRightsCtrl.model.owner }}
                    </span>
                </div>
                <div class="col-sm-4">
                    <button
                        class="oui-button oui-button_link oui-button_icon-right btn-margin"
                        title="{{:: 'cpb_rights_modify' | translate}}"
                        data-ng-disabled="!BillingRightsCtrl.canChangeContacts()"
                        data-ng-click="BillingRightsCtrl.openContacts()">
                        <span data-translate="cpb_rights_modify"></span>
                        <i class="fa fa-external-link"></i>
                    </button>
                </div>
            </div>
        </form>

        <!-- BILLING CONTACT FORM -->
        <form id="billingContactForm" class="form-horizontal ng-pristine ng-valid-maxlength">
            <div class="form-group" data-ng-class="{'has-error': billingContactForm.billingContactInput.$invalid}">
                <label class="col-sm-4 control-label ng-scope" for="billingContactInput">
                    {{:: 'cpb_rights_billing_contact' | translate }}
                </label>
                <div class="col-sm-4">
                    <div class="input-group" data-ng-if="BillingRightsCtrl.toggle.billing">
                        <input
                            id="billingContactInput"
                            name="billingContactInput"
                            type="text"
                            class="form-control ng-pristine ng-untouched ng-valid ng-valid-maxlength"
                            autofocus
                            autoselect
                            placeholder="{{BillingRightsCtrl.model.isUSorCA ? 'cpb_rights_table_email' : 'cpb_rights_table_nichandle' | translate}}"
                            data-ng-model="BillingRightsCtrl.contactFormData.billing"
                            data-ng-keyup="BillingRightsCtrl.watchBillingInput($event)"
                            data-ng-maxlength="255">
                        </input>
                        <div class="input-group-addon">
                            <button type="reset" class="no-style" data-ng-click="BillingRightsCtrl.toggleEditBilling()">
                                <i class="fa fa-times"></i>
                            </button>
                            <button type="submit" class="no-style" data-ng-click="BillingRightsCtrl.validateEditBilling()">
                                <i class="fa fa-check"></i>
                            </button>
                        </div>
                    </div>
                    <span class="ng-binding ng-scope" data-ng-if="!BillingRightsCtrl.toggle.billing" style="padding-top: 7px; display: inline-block">
                        {{ BillingRightsCtrl.model.billing }}
                    </span>
                </div>
                <div class="col-sm-4">
                    <button
                        class="oui-button oui-button_link oui-button_icon-right btn-margin"
                        title="{{:: 'cpb_rights_modify' | translate}}"
                        data-ng-disabled="!BillingRightsCtrl.canChangeContacts()"
                        data-ng-click="BillingRightsCtrl.openContacts()">
                        <span data-translate="cpb_rights_modify"></span>
                        <i class="fa fa-external-link"></i>
                    </button>
                </div>
            </div>
        </form>
    </div>

    <!-- END OF CONTACT FORMS -->

    <p class="bold">{{ :: 'cpb_rights_expl2' | translate }}</p>

    <div>
        <!-- RIGHTS TABLE -->

        <!-- ADD -->
        <button data-ng-click="BillingRightsCtrl.showAddRight()"
            class="oui-button oui-button_secondary"
            data-ng-disabled="BillingRightsCtrl.loader.rights || BillingRightsCtrl.data.rightIds === null"
            data-ng-if="BillingRightsCtrl.model.isAdmin"
            data-ng-class="{'visibility-hide' : BillingRightsCtrl.toggle.addUser}">
            <span translate="common_add"></span>
        </button>

        <oui-datagrid rows="BillingRightsCtrl.data.rights"
            row-loader="BillingRightsCtrl.transformItem($row)">
            <oui-column property="accountId"
                title="'cpb_rights_table_nichandle' | translate"></oui-column>
            <oui-column property="type"
                title="'cpb_rights_table_rights' | translate">
                <span data-ng-bind="('cpb_rights_table_rights_value_' + $row.type) | translate"></span>
            </oui-column>
            <oui-action-menu data-align="end" compact>
                <oui-action-menu-item text="{{'delete' | translate}}"
                    on-click="BillingRightsCtrl.removeRight($row)">
                </oui-action-menu-item>
            </oui-action-menu>
        </oui-datagrid>

    <div class="col-xs-12" data-ng-if="!BillingRightsCtrl.loader.rights">
        <p class="fs10">{{ :: 'cpb_rights_note' | translate }}</p>
    </div>

</div>
