<section class="cui-page__content">
    <div class="text-center" data-ng-if="$ctrl.loaders.init || $ctrl.loaders.checkOrder">
        <oui-loader class="d-inline-block" size="l"></oui-loader>
    </div>

    <div data-ng-if="!$ctrl.loaders.init">
        <div data-ng-if="$ctrl.veeam.state !== 'disabled'">
            <p data-ng-if="!$ctrl.veeam.accessInfos.restorePoint" data-translate="vps_tab_VEEAM_dashboard_no_current_restore_point"></p>
            <dl data-ng-if="$ctrl.veeam.accessInfos.restorePoint">
                <dt data-translate="vps_tab_VEEAM_dashboard_state"></dt>
                <dd class="label"
                    data-ng-class="{'label-success': $ctrl.veeam.state === 'enabled', 'label-info': $ctrl.veeam.state !== 'enabled'}"
                    data-ng-bind="('vps_tab_VEEAM_dashboard_state_' + $ctrl.veeam.state) | translate"></dd>

                <dt data-ng-if="$ctrl.veeam.accessInfos.restorePoint"
                    data-translate="vps_tab_VEEAM_dashboard_current_restore_point_creationTime"></dt>
                <dd data-ng-if="$ctrl.veeam.accessInfos.restorePoint"
                    data-ng-bind="$ctrl.veeam.accessInfos.restorePoint | momentFormat:'LLL'"></dd>
            </dl>

            <button class="oui-button oui-button_secondary"
                    type="button"
                    data-ng-if="$ctrl.veeam.accessInfos.restorePoint"
                    data-ng-click="$ctrl.unmount($ctrl.veeam.accessInfos.restorePoint)">
                <span data-translate="vps_configuration_veeam_umount_title_button"></span>
            </button>

            <oui-table rows="$ctrl.veeamTab"
                       rows-loader="$ctrl.loaders.veeamTab">
                <column title="'vps_tab_VEEAM_dashboard_table_header_date' | translate"
                        template="$ctrl.dateTemplate()"
                        sortable>
                </column>
                <column title="'common_actions' | translate"
                        class="oui-table__cell_action oui-table__cell_action-menu"
                        template="$ctrl.actionTemplate()">
                </column>
            </oui-table>
        </div>

        <div data-ng-if="$ctrl.veeam.state == 'disabled' && !$ctrl.loaders.checkOrder">
            <p data-ng-if="$ctrl.vps.hasVeeam && $ctrl.vps.canOrder" data-translate="vps_tab_VEEAM_dashboard_not_activated"></p>
            <p data-ng-if="!$ctrl.vps.hasVeeam" data-translate="vps_tab_VEEAM_dashboard_veeam_unavailable"></p>
            <p data-ng-if="!$ctrl.vps.canOrder" data-translate="vps_tab_VEEAM_dashboard_not_able_to_order"></p>
        </div>
    </div>
</section>
