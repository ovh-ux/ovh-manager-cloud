<section class="container-fluid cui-page__content cui-page__content-flex">

    <div class="row d-lg-flex">
        <div class="col-xm-12">


            <h1 class="oui-header_1 oui-header_underline"
                data-translate="vps_dashboard_upgrade_vps"></h1>
            <div class="oui-list_steps oui-list_separated mt-5">
                <ol class="oui-list__items">
                    <li class="oui-list__item oui-list__group"
                        data-ng-class="{ 'oui-list__item_complete': $ctrl.step > 1 }">
                        <span class="oui-list__header">
                            <span data-translate="vps_configuration_upgradevps_step1_question"></span>
                        </span>
                        <div class="oui-list__description">
                            <div data-ng-if="$ctrl.loaders.step1">
                                <div class="oui-loader oui-loader_m"
                                     data-ng-attr-aria-label="{{ 'common_loading' | translate }}"
                                     aria-label="{{ 'common_loading' | translate }}">
                                    <div class="oui-loader__container">
                                        <div class="oui-loader__image"></div>
                                    </div>
                                </div>
                            </div>
                            <div data-ng-if="!$ctrl.loaders.step1">
                                <div class="oui-radio"
                                     data-ng-repeat="upgrade in $ctrl.upgradesList track by $index">
                                    <input data-ng-if="upgrade.isAvailable && !upgrade.isCurrentModel"
                                           type="radio"
                                           class="oui-radio__input"
                                           id="{{upgrade.model}}"
                                           name="selectedModel"
                                           value="{{upgrade.model}}"
                                           data-ng-model="$ctrl.selectedModel.model"
                                           data-ng-change="$ctrl.canLoadNextStep($ctrl.selectedModel.model, 1)"/>
                                    <label class="w-100 m-0"
                                           data-ng-class="{ 'oui-radio__label-container': upgrade.isAvailable && !upgrade.isCurrentModel }"
                                           for="{{upgrade.model}}">
                                        <span class="row oui-radio__label">
                                            <i data-ng-if="upgrade.isCurrentModel"
                                               class="oui-icon oui-icon-success_circle fs16"
                                               style="position:absolute;left:0;top:0.2em"
                                               aria-hidden="true"></i>
                                            <span class="col-xs-3 col-sm-2 py-0">
                                                {{ upgrade.vcore }} {{ 'vps_configuration_upgradevps_step1_table_vcore_' + (upgrade.vcore>1?'other':'1') | translate }}
                                            </span>
                                            <span class="col-xs-2 col-sm-2 py-0">
                                                {{ upgrade.ram.value }} {{ 'unit_size_' + upgrade.ram.unit | translate }}
                                            </span>
                                            <span class="col-xs-3 col-sm-2 py-0">
                                                {{ upgrade.disk.value }} {{ 'unit_size_' + upgrade.disk.unit | translate }}
                                            </span>
                                            <span class="col-xs-4 py-0">
                                                <span data-ng-if="upgrade.isAvailable && !upgrade.isCurrentModel"
                                                      class="red bold">
                                                    {{ upgrade.monthPrice }} {{ 'vps_configuration_upgradevps_step1_table_price_monthly' | translate }}
                                                </span>
                                                <span data-ng-if="upgrade.isCurrentModel"
                                                      class="label label-info"
                                                      data-translate="vps_configuration_upgradevps_current"></span>
                                            </span>
                                        </span>
                                    </label>
                                </div>
                                <div>
                                    <div>
                                        {{ 'vps_configuration_upgradevps_step1_warning' | translate:'{ monthPrice: $ctrl.getCurrentModel().monthPrice }' }}
                                    </div>
                                    <small class="mt-4 font-italic" data-translate="vps_configuration_upgradevps_step1_warning2"></small>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="oui-list__item oui-list__group"
                        data-ng-class="{
                            'oui-list__item_disabled': $ctrl.step < 2,
                            'oui-list__item_complete': $ctrl.step > 2
                        }">
                        <span class="oui-list__header">
                            <span data-translate="vps_configuration_upgradevps_step2_title"></span>
                        </span>

                        <div class="oui-list__description">
                            <div data-ng-if="$ctrl.loaders.step2 && !$ctrl.order">
                                <div class="oui-loader oui-loader_m"
                                     data-ng-attr-aria-label="{{ 'common_loading' | translate }}"
                                     aria-label="{{ 'common_loading' | translate }}">
                                    <div class="oui-loader__container">
                                        <div class="oui-loader__image"></div>
                                    </div>
                                </div>
                            </div>
                            <div data-ng-if="!$ctrl.loaders.step2 && $ctrl.order"
                                 data-contracts="$ctrl.order.contracts"
                                 data-ng-model="$ctrl.agree.value"
                                 data-ng-change="$ctrl.canLoadNextStep($ctrl.agree.value)"
                                 data-full-text="false"></div>
                        </div>
                    </li>
                    <li class="oui-list__item oui-list__group"
                        data-ng-class="{
                            'oui-list__item_disabled': $ctrl.step < 3,
                            'oui-list__item_complete': $ctrl.step > 3
                        }">
                        <span class="oui-list__header">
                            <span data-translate="vps_configuration_upgradevps_step3_title"></span>
                            <!---->
                        </span>
                        <div class="oui-list__description">
                            <div data-ng-if="$ctrl.step > 2 && !$ctrl.order">
                                <div class="oui-loader oui-loader_m"
                                     data-ng-attr-aria-label="{{ 'common_loading' | translate }}"
                                     aria-label="{{ 'common_loading' | translate }}">
                                    <div class="oui-loader__container">
                                        <div class="oui-loader__image"></div>
                                    </div>
                                </div>
                            </div>
                            <div data-ng-if="$ctrl.step > 2 && $ctrl.order">
                                <div class="orange">{{ 'vps_configuration_upgradevps_step2_question' | translate:'{ vpsName: $ctrl.vps.name, modelName: $ctrl.selectedModelForUpgrade.name}' }}</div>
                                <div class="mt-3">{{ 'vps_configuration_upgradevps_step2_question2' | translate:'{ duration: $ctrl.selectedModelForUpgrade.duration.dateFormatted}' }}</div>
                                <dl class="dl-horizontal mt-3">
                                    <dt class="bold"
                                        data-translate="vps_configuration_upgradevps_step2_totalHT"></dt>
                                    <dd class="red bold"
                                        data-ng-bind="$ctrl.order.prices.withoutTax.text"></dd>
                                    <dt class="bold"
                                        data-translate="vps_configuration_upgradevps_step2_totalTTC"></dt>
                                    <dd class="red bold"
                                        data-ng-bind="$ctrl.order.prices.withTax.text"></dd>
                                </dl>
                                <div class="mt-3">
                                    {{ 'vps_configuration_upgradevps_step2_price_by_month' | translate:'{ monthPrice: $ctrl.selectedModelForUpgrade.monthPrice}' }}">
                                </div>
                                <div class="mt-4 orange"
                                     data-translate="vps_configuration_upgradevps_step2_confirm"></div>
                                <div data-translate="vps_configuration_upgradevps_step2_explication"></div>
                                <div class="mt-4">
                                    <small class="font-italic"
                                           data-translate="vps_configuration_upgradevps_step2_explication2"></small>
                                </div>
                                <div class="mt-4 font-weight-bold"
                                     data-translate="vps_configuration_upgradevps_step2_explication3"></div>

                                <button class="mt-4 oui-button oui-button_primary"
                                        data-ng-click="$ctrl.displayBC()"
                                        data-ng-translate="i18n.wizard_order">
                                </button>
                            </div>
                        </div>
                    </li>
                </ol>
            </div>


        </div>
    </div>

</section>
