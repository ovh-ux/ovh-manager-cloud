<div class="cui-page__content logs-change-password">
    <span class="oui-header_3" data-translate="logs_password_get_started_title"></span>
    <div class="mb-3">
        <span data-translate="logs_password_setup_message" data-translate-values="{userFullName : ctrl.fullName, userName: ctrl.userName}"></span>
    </div>
    <form novalidate name="ctrl.form">
        <div class="oui-field" data-ng-class="{'oui-field_error': ctrl.form.$submitted && ctrl.form.new_password.$invalid}">
            <label for="new_password" class="oui-label" data-translate="logs_password_setup_label"></label>
            <div class="oui-field__content">
                <div class="oui-field-control oui-field-control_5">
                    <input type="text" id="new_password"
                        name="new_password"
                        class="oui-input mb-0"
                        data-ng-model="ctrl.newPassword"
                        data-ng-class="{'oui-input_error': ctrl.form.$submitted && ctrl.form.new_password.$invalid}"
                        cui-password
                        data-ng-change="ctrl.validatePassword()"
                        cuc-autofocus
                        required />
                </div>
            </div>
        </div>
        <div class="oui-field__content mb-4">
            <div class="oui-field-control oui-field-control_5">
                <ul data-ng-if="!ctrl.passwordValid" class="logs-change-password__rules" data-ng-repeat="rule in ctrl.passwordRules">
                    <li class="logs-change-password__rule" data-ng-class="{'logs-change-password__rule_invalid': rule.isValidated && !rule.isValid}">
                        <i data-ng-if="!rule.isValidated || rule.isValid" class="oui-icon oui-icon-success"></i>
                        <i data-ng-if="rule.isValidated && !rule.isValid" class="oui-icon oui-icon-error"></i>
                        <span data-translate="{{rule.message}}" data-translate-values="rule.translateParams"></span>
                    </li>
                </ul>
                <ul data-ng-if="ctrl.passwordValid" class="logs-change-password__rules">
                    <li class="logs-change-password__rule">
                        <i class="oui-icon oui-icon-success_circle"></i>
                        {{::'logs_password_valid' | translate}}
                    </li>
                </ul>
            </div>
        </div>
        <div class="cui-form-actions">
            <oui-spinner data-ng-if="ctrl.saving.loading"></oui-spinner>
            <div data-ng-if="!ctrl.saving.loading">
                <button type="submit"
                    class="oui-button oui-button_primary"
                    data-translate="common_save"
                    data-ng-click="ctrl.changePassword()"></button>
            </div>
        </div>
    </form>
</div>
