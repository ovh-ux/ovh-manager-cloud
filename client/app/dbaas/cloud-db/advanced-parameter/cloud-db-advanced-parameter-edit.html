<section class="cui-page__content" class="cloud-db-parameters">
    <cui-back-link data-state="{{ $ctrl.previousState.state }}"
                   data-state-params="$ctrl.previousState.stateParams"
                   data-text="'cloud_db_back_home' | translate"></cui-back-link>
    <cui-page-content-title text="'cloud_db_advanced_parameter_edit_title' | translate"></cui-page-content-title>
    <p data-translate="cloud_db_advanced_parameter_intro_text"></p>
    <form novalidate name="$ctrl.form">
        <cui-loader data-ng-show="$ctrl.parameters.loading"></cui-loader>
        <div class="cloud-db-parameters__parameter">
            <cui-button data-text="'Rétablir toutes les valeurs par défaut'" 
                    data-on-click="$ctrl.restoreDefaultParameters()" 
                    data-disabled="!$ctrl.canRestoreDefaultParameters()" 
                    data-type="secondary"
                    class="cloud-db-parameters__button cloud-db-parameters__button-right"></cui-button>
        </div>
        <div class="oui-field cloud-db-parameters__parameter" 
            data-ng-if="!$ctrl.parameters.loading"
            data-ng-repeat="param in $ctrl.parameters.data.details track by $index">
            <label for="{{ param.key }}" class="oui-label" data-ng-bind="param.key"></label>
            <div class="oui-field__content">
                <div class="oui-field-control">
                    <cui-radio-bar data-ng-model="$ctrl.model[param.key]">
                        <cui-radio-bar-item data-ng-repeat="value in param.availableValues"
                            data-text="value"
                            data-value="value"></cui-radio-bar-item>
                    </cui-radio-bar>
                </div>
                <div class="oui-field-helper" data-ng-bind="param.description"></div>
                <div class="cloud-db-parameters__button cloud-db-parameters__button-right">
                    <cui-button data-text="'Par défaut'" 
                        data-on-click="$ctrl.model[param.key] = param.defaultValue" 
                        data-disabled="$ctrl.model[param.key] === param.defaultValue" 
                        data-type="secondary"></cui-button>
                </div>
            </div>
        </div>

        <div class="cui-form-actions">
            <cui-loader data-ng-show="$ctrl.saving"></cui-loader>
            <div data-ng-hide="$ctrl.saving">
                <cui-submit-button data-text="'common_modify' | translate"
                    data-on-click="$ctrl.update()"></cui-submit-button>
                <a class="oui-button oui-button_link"
                    data-translate="common_cancel"
                    data-ui-state="$ctrl.previousState.state"
                    data-ui-state-params="$ctrl.previousState.stateParams"></a>
            </div>
        </div>
    </form>
</section>
